# 拉流问题

## 版本一：所有识别和所有拉流在同一个进程中,16个拉流线程, 每个线程处理一路流
```mermaid
graph TD
A[识别进程] --> B[拉流线程1]
A --> C[拉流线程2]
A --> D[拉流线程3]
A --> E[拉流线程4]
```
### 问题
1. cpu资源不够用,导致拉流延迟，解码经常出错，花帧，跳帧，VPU一直报错(导致进程卡死)
## 版本二：拉流放在4个进程中，每个进程处理4路流，所有识别放在主进程中
```mermaid
graph TD
A[识别进程] -->|跨进程拷贝数据6M数据100ms| B[拉流进程1]
A --> C[拉流进程2]
A --> D[拉流进程3]
A --> E[拉流进程4]
```

### 问题
1. 跨进程拷贝数据，取帧速度慢(100ms左右6M数据)，导致帧数不够。
## 版本三:  拉流和识别放在同一个进程中，每个进程处理4路流，每个流最大对应4个识别线程
```mermaid
graph TD
A[拉流进程1] --> B[识别线程1]
A --> C[识别线程2]
A --> D[识别线程3]
A --> E[识别线程4]
F[拉流进程2] --> G[识别线程1]
F --> H[识别线程2]
F --> I[识别线程3]
F --> J[识别线程4]
```
### 问题
1. 未实现，需要上层改动